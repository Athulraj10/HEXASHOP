<!DOCTYPE html>
<html lang="en" data-bs-theme="auto">

<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <meta name="description" content="" />
  <meta name="generator" content="Hugo 0.111.3" />
  <title>signup page</title>
  <link href="https://fonts.googleapis.com/css?family=Lato:300,400,700&display=swap" rel="stylesheet" />

  <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/font-awesome/4.7.0/css/font-awesome.min.css" />

  <link rel="stylesheet" href="/stylesheets/style1.css" />

  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha2/dist/css/bootstrap.min.css" rel="stylesheet" />
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css" />
  <link rel="stylesheet" type="text/css"
    href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css" />

  <link rel="stylesheet" type="text/css"
    href="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/5.1.3/css/bootstrap.min.css" />
  <link rel="preconnect" href="https://fonts.googleapis.com" />
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
  <link href="https://fonts.googleapis.com/css2?family=Abel&family=Comfortaa:wght@300&display=swap" rel="stylesheet" />
<style>
  .bulb svg {
  display: block;
  height: 90px;
  transform-origin: center top;
  animation: swing_31 1.6s ease-in-out 10 alternate;
}

@keyframes swing_31 {
  0% {
    transform: rotate(18deg);
  }

  100% {
    transform: rotate(-18deg);
  }
}
</style>
</head>


<body class="rafcolour">
  <div class="container mt-5 mt-md-0">
    <div class="row justify-content-center align-items-center vh-50">
      <div class="col-12 col-md-8 col-lg-6">
        <div class="box p-4">
          <h1 class="signin-heading m-0" style="color: rgb(255, 255, 255); font-family: 'Abel', sans-serif">
            Sign Up
          </h1><span class="bulb">
            <svg width="60pt" height="60pt" version="1.1" viewBox="0 0 1200 1200" xmlns="http://www.w3.org/2000/svg">
       <g>
        <path d="m930 552.86h-660c-6.9297 0-13.191-4.168-15.836-10.582-2.6602-6.4102-1.1875-13.777 3.7148-18.684l289.72-289.7c4.1367-4.1367 10.078-5.875 15.836-4.6211 5.707 1.2734 10.379 5.375 12.387 10.883 3.7031 10.164 13.43 16.996 24.176 16.996s20.473-6.832 24.191-17.008c2.0078-5.5078 6.6797-9.5938 12.406-10.863 5.6602-1.2539 11.668 0.48437 15.82 4.6211l289.7 289.7c4.9062 4.9062 6.3789 12.27 3.7148 18.684-2.6445 6.4062-8.9062 10.574-15.836 10.574zm-618.62-34.285h577.23l-245.5-245.51c-11.102 11.469-26.586 18.367-43.109 18.367-16.539 0-32.008-6.8984-43.109-18.348z"></path>
        <path d="m986.48 1028.6h-772.97c-23.203 0-42.086-18.883-42.086-42.086v-425.82c0-23.203 18.883-42.09 42.086-42.09h772.97c23.203 0 42.086 18.887 42.086 42.09v425.82c0 23.203-18.883 42.086-42.086 42.086zm-772.97-475.71c-4.3008 0-7.8008 3.5-7.8008 7.8047v425.82c0 4.3008 3.5 7.8008 7.8008 7.8008h772.97c4.3008 0 7.8008-3.5 7.8008-7.8008v-425.82c0-4.3047-3.5-7.8047-7.8008-7.8047z"></path>
        <path d="m599.92 935.74c-89.332 0-162-72.758-162-162.17 0-89.414 72.672-162.17 162-162.17 89.414 0 162.17 72.758 162.17 162.17-0.003906 89.414-72.758 162.17-162.17 162.17zm0-290.05c-70.43 0-127.72 57.371-127.72 127.89 0 70.512 57.289 127.89 127.72 127.89 70.512 0 127.89-57.371 127.89-127.89-0.003907-70.516-57.375-127.89-127.89-127.89z"></path>
        <path d="m576.71 838.07c-4.5547 0-8.9062-1.8086-12.121-5.0234l-48.113-48.129c-6.6953-6.6953-6.6953-17.543 0-24.242 6.6953-6.6953 17.543-6.6953 24.242 0l35.992 36.012 82.582-82.582c6.6953-6.6953 17.543-6.6953 24.242 0 6.6953 6.6953 6.6953 17.543 0 24.242l-94.703 94.703c-3.2148 3.2109-7.5703 5.0195-12.121 5.0195z"></path>
        <path d="m600 291.43c-25.113 0-47.777-15.887-56.383-39.559-2.3633-6.1445-3.6172-13.125-3.6172-20.441 0-33.082 26.918-60 60-60s60 26.918 60 60c0 7.3477-1.2383 14.312-3.6992 20.727-8.5391 23.387-31.207 39.273-56.301 39.273zm0-85.715c-14.18 0-25.715 11.535-25.715 25.715 0 3.0625 0.50391 5.9766 1.4414 8.4375 3.8008 10.445 13.527 17.277 24.273 17.277s20.473-6.832 24.191-17.008c1.0391-2.6992 1.5234-5.6094 1.5234-8.707 0-14.18-11.535-25.715-25.715-25.715z"></path>
       </g>
      </svg>
      </span>
          <form id="signup-form"  action="/register" method="post">
            <div class="form-floating">
              <input type="email" class="form-control m-0" id="email" name="email" placeholder="name@example.com" />
              <label for="email">Email address</label>
              <span class="duplicateMessage" style="color: #ff6219;font-size: 18px; text-decoration: none;margin:0;font-weight: bold;">
              </span>
            </div>
            <div class="form-floating mb-3">
              <input type="text" class="form-control" id="fullName" name="name"
                placeholder="Enter Your Full Name" />
              <label for="fullName">Full Name</label>
            </div>
            <div class="form-floating mb-3">
              <input type="text" class="form-control" id="mobile" name="mobile" placeholder="Enter mobile number" />
              <label for="mobile">Mobile number</label>
              <span class="mobileDuplicate" style="color: #ff6219;font-size: 18px; text-decoration: none; font-weight: bold;">
              </span>
            </div>
            <div class="form-floating mb-3">
              <input type="password" class="form-control" id="password" name="password" placeholder="Password" />
              <label for="password">Password</label>
            </div>
            <div class="form-floating mb-3">
              <input type="password" class="form-control" id="confirmPassword" name="confirmPassword"
                placeholder="confirm Password" />
              <label for="confirmPassword">Confirm Password</label>
            </div>
            <div class="form-floating mb-3">
              <input type="text" class="form-control" id="referal" name="referalCode"
                placeholder="confirm Password" />
              <label for="confirmPassword">Referal code</label>
            </div>

            <div class="d-grid justify-content-center">
              <button class="btn btn-signin btn-lg mt-3" type="submit" id="Submitting" style="
                  background-color: rgb(0, 0, 0);
                  color: white;
                  width: 200px;
                  text-align: center;
                  font-size: 17px;
                  transition: background-color 0.3s ease-in-out;
                " onmouseover="this.style.backgroundColor='#555';" onmouseout="this.style.backgroundColor='rgb(0, 0, 0)';
                ">
                Sign Up
              </button>
            </div>
          </form>
          <div id="otp-section" class="d-none">
            <form>
              <h6>OTP</h6>
              <div class="pin-input">
                <% for (let i=1; i < 7; i++) { %>
                  <input type="number" class="form-control pin-box" id="box<%=i%>" maxlength="1" />
                  <% } %>
              </div>
              <br />
              <button class="btn btn-verify-otp btn-primary btn-lg mt-3" type="button" id="verifyOtp" style="
                  background-color: rgb(0, 0, 0);
                  color: white;
                  width: 200px;
                  text-align: center;
                  font-size: 17px;
                  transition: background-color 0.3s ease-in-out;
                " onmouseover="this.style.backgroundColor='#555';" onmouseout="this.style.backgroundColor='rgb(0, 0, 0)';
                ">
                Verify OTP
              </button>
            </form>
            <div class="d-flex justify-content-between links">
              <a onclick="normalSection()" class="text-white d-none" id="present">back</a>
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>
</body>
<script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
<script src="https://cdn.jsdelivr.net/jquery.validation/1.16.0/jquery.validate.min.js"></script>
<script>
  $(document).ready(function () {
    $.validator.addMethod(
      "noSpecialChars",
      function (value, element) {
        return this.optional(element) || /^(?!\s)[a-zA-Z ]+$/.test(value);
      },
      "Special characters and spaces are not allowed"
    );
    $.validator.addMethod(
      "email",
      function (value, element) {
        return (
          this.optional(element) ||
          /^([a-zA-Z0-9._%+-]+@[a-zA-Z0-9.-]+\.[a-zA-Z]{2,})$/.test(value)
        );
      },
      "Please enter a valid email address"
    );
    $.validator.addMethod(
      "number",
      function (value, element) {
        return this.optional(element) || /^(?!0)[0-9]+$/.test(value);
      },
      "numbers only allowed"
    );
    $("#signup-form").validate({
      rules: {
        email: {
          required: true,
          email: true,
        },
        fullName: {
          required: true,
          minlength: 3,
          noSpecialChars: true,
        },
        mobile: {
          required: true,
          maxlength: 10,
          minlength: 10,
          number: true,
        },
        password: {
          required: true,
          minlength: 6,
        },
        confirmPassword: {
          required: true,
          minlength: 6,
          equalTo: "#password",
        },
      },
      messages: {
        email: {
          required: "Please enter your email address",
          email: "Please enter a valid email address",
        },
        fullName: {
          required: "Please enter your full name",
          minlength: "Your name must be at least 3 characters long",
          noSpecialChars: "Special characters and spaces are not allowed",
        },
        mobile: {
          required: "Please enter Mobile Number",
          minlength: "10 digit indian number should be there",
          maxlength: "maximum 10 digit allowed in indian number",
          number: "only numbers allowed",
        },
        password: {
          required: "Please enter a password",
          minlength: "Your password must be at least 8 characters long",
        },
        confirmPassword: {
          required: "Please confirm your password",
          minlength: "Your password must be at least 8 characters long",
          equalTo: "Your passwords do not match",
        },
      },
      highlight: function (element) {
        $(element).closest(".form-floating").addClass("is-invalid");
      },
      unhighlight: function (element) {
        $(element).closest(".form-floating").removeClass("is-invalid");
      },
      errorElement: "div",
      errorClass: "invalid-feedback",
      errorPlacement: function (error, element) {
        if (element.parent(".input-group").length) {
          error.insertAfter(element.parent());
        } else {
          error.insertAfter(element);
        }
      },
    });
  });
let mobileDuplicate=document.querySelector(".mobileDuplicate")
let usermobile=document.getElementById("mobile")
usermobile.addEventListener('blur',duplicateNumberExist)
function duplicateNumberExist(){
  const usermobileNumber=usermobile.value
  fetch('/duplicateNumber',{
    method:"POST",
    headers:{
      "Content-Type":'application/json'
    },
    body: JSON.stringify({usermobileNumber})
  })
    .then(response=>response.json())
    .then(data=>{
      if(data.exists){console.log(data.exists);mobileDuplicate.innerHTML="Number Already Exists"}
  }).catch(error=>(console.log(error.message)))
}

  var message = document.querySelector(".duplicateMessage");
const emailInput = document.getElementById('email');
emailInput.addEventListener('blur', checkDuplicateEmailExist);

function checkDuplicateEmailExist() {
  const email = emailInput.value;
  fetch('/duplicateUser', {
    method: 'POST',
    headers: {
      'Content-Type': 'application/json'
    },
    body: JSON.stringify({ email })
  })
    .then(response => response.json())
    .then(data => {
      if (data.exists) {
        message.innerHTML = "I founded that you are already Exist";
      }else{
        message.innerHTML = "";
      }
    }).catch(error=>console.log(error))
  }
</script>
<script src="https://unpkg.com/sweetalert/dist/sweetalert.min.js"></script>

</body>

</html>